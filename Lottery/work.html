<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>工作籤筒</title>
    <link href="bootstrap-5.1.3-dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="bootstrap-5.1.3-dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <link rel="stylesheet" href="base.css">
    <link rel="stylesheet" href="pages.css">
</head>

<script>

    const gifInterval = 3700;

    function clickPoemCan() {
        document.getElementById('poemAnimation').src = "resource/Lottery/workpoemanimation.gif";
        switchPoemAnimation();
        setTimeout(function () {
            document.getElementById('poemAnimation').src = "resource/Lottery/lovepoemanimation.gif";
            switchPoemAnimation();
            takeAPoem();
        }, gifInterval)
    }

    function takeAPoem() {
        const randomNum = getRandom(1, 34);
        $('#poemPic').attr('src', `resource/work/${randomNum}.jpg`);

        switchPoem();

        function getRandom(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        };
    }

    function switchPoem() {
        var text = document.getElementById("poemContent");
        text.classList.toggle("poemhidden");
        text.classList.toggle("poemshowing");
    }

    function switchPoemAnimation() {
        var poemAnimation = document.getElementById('poemAnimationContent');
        poemAnimation.classList.toggle("poemanimationshowing");
        poemAnimation.classList.toggle("poemanimationhidden");
    }
</script>

<body>
    <div class="width">
        <div class="maxwidth">
            <div class="bgsetting workbg">

                <div class="header">
                    <a href="love.html">
                        <div class="headeroptions headerleftoption">
                            愛情抽籤
                        </div>
                    </a>
                    <a href="wealth.html">
                        <div class="headeroptions headerrightoption">
                            財運抽籤
                        </div>
                    </a>
                </div>

                <div class="poemcancontent">
                    <img src="resource/worklottery.png" alt="工作籤筒" id="poemCan" onclick="clickPoemCan()">
                </div>

                <div class="bottom">
                    <div id="backBtn">
                        <a href="index.html">
                            <img src="resource/workbackbtn.png" alt="返回圖樣" class="backbtnpic">
                        </a>
                    </div>
                </div>

                <div id="poemContent" class="poemhidden">
                    <div class="closecontent">
                        <a href="work.html">
                            <img src="resource/close.png" id="closeBtn" alt="關閉圖樣" onclick="switchPoem()">
                        </a>
                    </div>
                    <img id="poemPic" src="" alt="籤詩">
                </div>

            </div>
        </div>
    </div>

    <div class="poemanimationhidden" id="poemAnimationContent">
        <div class="animationcontent">
            <div class="maxwidth workbg fullheight">
                <div class="whitecontent">
                    <div class="cutcontent">
                        <img src="resource/workanimationbg.jpg" alt="動圖背景" class="whitebgpic">
                    </div>
                    <div class="cutcontent">
                        <img src="resource/Lottery/lovepoemanimation.gif" alt="抽籤動圖" class="poemanimation"
                            id="poemAnimation">
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>